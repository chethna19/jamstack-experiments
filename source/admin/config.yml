# Netlify CMS configuration integrating it with Middleman.
# © 2018 Filip Zrůst
#
# This file is part of JAMstack Experiments.
#
# JAMstack Experiments is free software: you can redistribute it
# and/or modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation, either version 3 of
# the License, or any later version.
#
# JAMstack Experiments is distributed in the hope that it will be
# useful, but WITHOUT ANY WARRANTY; without even the implied warranty
# of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with JAMstack Experiments. If not,
# see <http://www.gnu.org/licenses/>.

backend:
  name: git-gateway
  branch: middleman

collections:
  - name: "users"
    label: "Users"
    folder: "source/users"
    create: true
    slug: "{{title}}.html"
    fields:
      - {label: "Username", name: "title", widget: "string"}
      - {label: "Homepage Title", name: "heading", widget: "string"}
      - {label: "Homepage Subtitle", name: "subheading", widget: "string",
         required: false}
      - {label: "Show articles?", name: "articles", widget: "boolean"}
      - {label: "Created at", name: "date", widget: "datetime"}

  - name: "articles"
    label: "Articles"
    folder: "source/articles"
    create: true
    slug: "{{user}}-{{slug}}.html"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Publish Date", name: "date", widget: "datetime"}
      - {label: "Author", name: "user", widget: "relation",
         collection: "users", searchFields: ["title"], valueField: "title"}
      - {label: "Body", name: "body", widget: "markdown"}

media_folder: source/uploads
public_folder: /uploads
